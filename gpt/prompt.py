def build_analysis_prompt(pair_name, high, low, close):
    return f"""
شما یک تحلیل‌گر حرفه‌ای بازارهای مالی هستید.

لطفاً با استفاده از تصویر نمودار شمعی ارسال‌شده و اطلاعات قیمتی زیر، تحلیل تکنیکال دقیق و خلاصه‌ای از وضعیت فعلی بازار ارائه دهید.

📌 اطلاعات داده‌شده مربوط به چهار روز گذشته است:
- بالاترین قیمت‌ها (High): {', '.join(map(str, high))}
- پایین‌ترین قیمت‌ها (Low): {', '.join(map(str, low))}
- قیمت‌های بسته‌شدن (Close): {', '.join(map(str, close))}
- نمودار مربوط به جفت ارز/نماد: {pair_name or 'نامشخص'}

📊 وظایف شما:

1. محاسبه و ارائه نقاط Pivot، Resistance و Support با استفاده از داده‌های بالا  
   🔸 همه اعداد را رند کن

2. بررسی نمودار و تحلیل در قالب سه سناریو:
   - سناریوی صعودی
   - سناریوی نزولی
   - بازار رنج

3. ارائه پیشنهادهای معاملاتی بر اساس هر سناریو:
   - نقاط ورود و خروج پیشنهادی
   - نسبت سود به ضرر (Risk/Reward Ratio)
   - فقط معاملاتی را پیشنهاد بده که نسبت سود به ضرر آن‌ها حداقل 1:2 باشد

4. اگر هیچ سناریویی با win rate مناسب وجود نداشت، واضح بگو که معامله‌ای پیشنهاد نمی‌شود.

📌 ساختار خروجی باید به صورت بندهای مشخص و قابل‌خواندن باشد و از تکرار داده‌های ورودی خودداری شود.
"""
